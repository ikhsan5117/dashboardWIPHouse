@using System.Security.Claims
<!DOCTYPE html>
<!--[if IE 9]>         <html class="no-js lt-ie10" lang="en"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->

<head>
    <meta charset="utf-8">
    <title>@ViewData["Title"] - dashboardWIPHouse</title>
    <meta name="description"
        content="ProUI is a Responsive Bootstrap Admin Template created by pixelcave and published on Themeforest.">
    <meta name="author" content="pixelcave">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0">

    <!-- Icons -->

    <!-- END Icons -->

    <!-- Stylesheets -->
    <link rel="stylesheet" href="~/css/bootstrap.min.css">
    <link rel="stylesheet" href="~/css/plugins.css">
    <link rel="stylesheet" href="~/css/main.css">
    <link rel="stylesheet" href="~/css/themes.css">
    <!-- Default Theme -->
    <link id="theme-link" rel="stylesheet" href="/css/themes/night.css">
    <!-- END Stylesheets -->

    <!-- Modernizr -->
    <script src="~/js/vendor/modernizr.min.js"></script>

    <!-- SweetAlert for better alerts -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Custom Logo Styles -->
    <style>
        .sidebar-brand-wrapper {
            width: 100% !important;
            padding: 0 !important;
            margin: 0 !important;
            display: block !important;
        }
        
        .sidebar-brand {
            padding: 0 !important;
            margin: 0 !important;
            display: block !important;
            width: 100% !important;
            height: 50px !important;
            line-height: 50px !important;
        }
        
        .sidebar-brand img {
            width: 100% !important;
            height: 50px !important;
            object-fit: contain !important;
            display: block !important;
            margin: 0 !important;
            padding: 0 !important;
        }
    </style>

</head>

<body>
    <!-- Page Wrapper -->
    <div id="page-wrapper">
        <!-- Preloader -->
        <div class="preloader themed-background">
            <h1 class="push-top-bottom text-light text-center"><strong>Pro</strong>UI</h1>
            <div class="inner">
                <h3 class="text-light visible-lt-ie10"><strong>Loading..</strong></h3>
                <div class="preloader-spinner hidden-lt-ie10"></div>
            </div>
        </div>
        <!-- END Preloader -->

        <!-- Page Container -->
        <div id="page-container" class="sidebar-partial sidebar-visible-lg sidebar-no-animations enable-cookies">
            <!-- Alternative Sidebar -->
            <div id="sidebar-alt">
                <div id="sidebar-alt-scroll">
                    <div class="sidebar-content">
                        <!-- Chat -->
                        <a href="javascript:void(0)" class="sidebar-title">
                            <i class="gi gi-comments pull-right"></i> <strong>Chat</strong>UI
                        </a>
                        <!-- Chat Users -->
                        <ul class="chat-users clearfix">
                            <li>
                                <a href="javascript:void(0)" class="chat-user-online">
                                    <span></span>
                                    <img src="~/img/placeholders/avatars/avatar12.jpg" alt="avatar" class="img-circle">
                                </a>
                            </li>
                            <!-- Add more chat users as needed -->
                        </ul>
                        <!-- END Chat Users -->
                    </div>
                </div>
            </div>
            <!-- END Alternative Sidebar -->

            <!-- Main Sidebar -->
            <div id="sidebar">
                <div id="sidebar-scroll">
                    <div class="sidebar-content">
                        <!-- Brand -->
                        <div class="sidebar-brand-wrapper">
                            <a href="@Url.Action("Index", "Home")" class="sidebar-brand">
                                <img src="~/img/logo.png" alt="Logo" />
                            </a>
                        </div>
                        <!-- END Brand -->

                        <!-- User Info -->
                        <div class="sidebar-section sidebar-user clearfix sidebar-nav-mini-hide">
                            <div class="sidebar-user-avatar">
                                <a href="javascript:void(0)">
                                    <img src="~/img/placeholders/avatars/avatar2.jpg" alt="avatar">
                                </a>
                            </div>
                            <div class="sidebar-user-name">
                                @if (User.Identity.IsAuthenticated)
                                {
                                    <div>@User.Identity.Name</div>
                                }
                                else
                                {
                                    @Html.Raw("Guest")
                                }
                            </div>
                            <div class="sidebar-user-links">
                                <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom"
                                    title="Profile"><i class="gi gi-user"></i></a>
                                <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom"
                                    title="Messages"><i class="gi gi-envelope"></i></a>
                                <a href="javascript:void(0)" class="enable-tooltip" data-placement="bottom"
                                    title="Settings" onclick="$('#modal-user-settings').modal('show');"><i
                                        class="gi gi-cogwheel"></i></a>
                                <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom"
                                    title="Logout"><i class="gi gi-exit"></i></a>
                            </div>
                        </div>
                        <!-- END User Info -->

                        <!-- Theme Colors -->
                        <ul class="sidebar-section sidebar-themes clearfix sidebar-nav-mini-hide">
                            <li>
                                <a href="javascript:void(0)" class="themed-background-dark-night themed-border-night"
                                    data-theme="/css/themes/night.css" data-toggle="tooltip" title="Night"></a>
                            </li>
                            <li>
                                <a href="javascript:void(0)"
                                    class="themed-background-dark-amethyst themed-border-amethyst"
                                    data-theme="/css/themes/amethyst.css" data-toggle="tooltip" title="Amethyst"></a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" class="themed-background-dark-modern themed-border-modern"
                                    data-theme="/css/themes/modern.css" data-toggle="tooltip" title="Modern"></a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" class="themed-background-dark-emerald themed-border-emerald"
                                    data-theme="/css/themes/emerald.css" data-toggle="tooltip" title="Emerald"></a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" class="themed-background-dark-fire themed-border-fire"
                                    data-theme="/css/themes/fire.css" data-toggle="tooltip" title="Fire"></a>
                            </li>
                            <li>
                                <a href="javascript:void(0)" class="themed-background-dark-forest themed-border-forest"
                                    data-theme="/css/themes/forest.css" data-toggle="tooltip" title="Forest"></a>
                            </li>
                        </ul>
                        <!-- END Theme Colors -->

                        <!-- Dynamic Sidebar Navigation Based on Database -->
                        <ul class="sidebar-nav">
                            @{
                                var currentDatabase = User.FindFirst("Database")?.Value;
                                var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
                            }

                            @if (currentDatabase == "HOSE")
                            {
                                <!-- HOSE Database Navigation -->
                                <li class="sidebar-header">
                                    <span class="sidebar-nav-mini-hide">HOSE Dashboard</span>
                                </li>
                                <li>
                                    <a href="@Url.Action("Index", "Home")"
                                        class="@(currentController == "Home" ? "active" : "")">
                                        <i class="gi gi-stopwatch sidebar-nav-icon"></i>
                                        <span class="sidebar-nav-mini-hide">Green Hose</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="@Url.Action("Index", "AfterWashing")"
                                        class="@(currentController == "AfterWashing" ? "active" : "")">
                                        <i class="gi gi-leaf sidebar-nav-icon"></i>
                                        <span class="sidebar-nav-mini-hide">After Washing</span>
                                    </a>
                                </li>

                                @if (User.IsInRole("Admin"))
                                {
                                    <li class="sidebar-header">
                                        <span class="sidebar-nav-mini-hide">Update Data</span>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("Index", "Items")"
                                            class="@(currentController == "Items" ? "active" : "")">
                                            <i class="gi gi-table sidebar-nav-icon"></i>
                                            <span class="sidebar-nav-mini-hide">Green Hose Items</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="@Url.Action("Index", "ItemsAW")"
                                            class="@(currentController == "ItemsAW" ? "active" : "")">
                                            <i class="gi gi-table sidebar-nav-icon"></i>
                                            <span class="sidebar-nav-mini-hide">After Washing Items</span>
                                        </a>
                                    </li>
                                }
                            }
                            else if (currentDatabase == "RVI")
                            {
                                <!-- RVI Database Navigation -->
                                <li class="sidebar-header">
                                    <span class="sidebar-nav-mini-hide">RVI Dashboard</span>
                                </li>
                                <li>
                                    <a href="@Url.Action("Index", "RVI")"
                                        class="@(currentController == "RVI" ? "active" : "")">
                                        <i class="gi gi-cogwheel sidebar-nav-icon"></i>
                                        <span class="sidebar-nav-mini-hide">RVI Dashboard</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="@Url.Action("Index", "BeforeCheck")"
                                        class="@(currentController == "BeforeCheck" ? "active" : "")">
                                        <i class="gi gi-check sidebar-nav-icon"></i>
                                        <span class="sidebar-nav-mini-hide">Before Check</span>
                                    </a>
                                </li>
                                
                                @if (User.IsInRole("Admin"))
                                {
                                    <li class="sidebar-header">
                                        <span class="sidebar-nav-mini-hide">RVI Management</span>
                                    </li>
                                    <li>
                                        <a href="#" onclick="alert('RVI Item Management - Coming Soon!')">
                                            <i class="gi gi-table sidebar-nav-icon"></i>
                                            <span class="sidebar-nav-mini-hide">RVI Items</span>
                                        </a>
                                    </li>
                                }
                            }
                            else if (currentDatabase == "MOLDED")
                            {
                                <!-- MOLDED Database Navigation -->
                                <li class="sidebar-header">
                                    <span class="sidebar-nav-mini-hide">MOLDED Dashboard</span>
                                </li>
                                <li>
                                    <a href="@Url.Action("Index", "Molded")"
                                        class="@(currentController == "Molded" && ViewContext.RouteData.Values["action"]?.ToString() != "Items" ? "active" : "")">
                                        <i class="gi gi-cogwheel sidebar-nav-icon"></i>
                                        <span class="sidebar-nav-mini-hide">MOLDED Dashboard</span>
                                    </a>
                                </li>
                                <li>
                                    <a href="@Url.Action("Items", "Molded")"
                                        class="@(currentController == "Molded" && ViewContext.RouteData.Values["action"]?.ToString() == "Items" ? "active" : "")">
                                        <i class="gi gi-table sidebar-nav-icon"></i>
                                        <span class="sidebar-nav-mini-hide">Molded Items</span>
                                    </a>
                                </li>
                            }
                            else
                            {
                                <!-- Default Navigation (Not Logged In) -->
                                <li class="sidebar-header">
                                    <span class="sidebar-nav-mini-hide">Please Login</span>
                                </li>
                                <li>
                                    <a href="@Url.Action("Login", "Account")">
                                        <i class="gi gi-login sidebar-nav-icon"></i>
                                        <span class="sidebar-nav-mini-hide">Login</span>
                                    </a>
                                </li>
                            }

                            <!-- Common Navigation Items -->
                            <li class="sidebar-header">
                                <span class="sidebar-nav-mini-hide">Account</span>
                            </li>
                            <li>
                                <a href="javascript:void(0)" onclick="confirmLogout()">
                                    <i class="gi gi-exit sidebar-nav-icon"></i>
                                    <span class="sidebar-nav-mini-hide">Logout</span>
                                </a>
                            </li>
                        </ul>
                        <!-- END Sidebar Navigation -->

                    </div>
                </div>
            </div>
            <!-- END Main Sidebar -->

            <!-- Main Container -->
            <div id="main-container">
                <!-- Header -->
                <header class="navbar navbar-default">
                    <!-- Left Header Navigation -->
                    <ul class="nav navbar-nav-custom">
                        <!-- Main Sidebar Toggle Button -->
                        <li>
                            <a href="javascript:void(0)" onclick="App.sidebar('toggle-sidebar');this.blur();">
                                <i class="fa fa-bars fa-fw"></i>
                            </a>
                        </li>
                        <!-- Template Options -->
                        <li class="dropdown">
                            <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="gi gi-settings"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-custom dropdown-options">
                                <li class="dropdown-header text-center">Header Style</li>
                                <li>
                                    <div class="btn-group btn-group-justified btn-group-sm">
                                        <a href="javascript:void(0)" class="btn btn-primary"
                                            id="options-header-default">Light</a>
                                        <a href="javascript:void(0)" class="btn btn-primary"
                                            id="options-header-inverse">Dark</a>
                                    </div>
                                </li>
                                <li class="dropdown-header text-center">Page Style</li>
                                <li>
                                    <div class="btn-group btn-group-justified btn-group-sm">
                                        <a href="javascript:void(0)" class="btn btn-primary"
                                            id="options-main-style">Default</a>
                                        <a href="javascript:void(0)" class="btn btn-primary"
                                            id="options-main-style-alt">Alternative</a>
                                    </div>
                                </li>
                            </ul>
                        </li>
                    </ul>
                    <!-- END Left Header Navigation -->

                    <!-- Search Form -->
                    <form action="javascript:void(0)" method="post" class="navbar-form-custom">
                        <div class="form-group">
                            <input type="text" id="top-search" name="top-search" class="form-control"
                                placeholder="Search..">
                        </div>
                    </form>
                    <!-- END Search Form -->

                    <!-- Right Header Navigation -->
                    <ul class="nav navbar-nav-custom pull-right">
                        <!-- User Dropdown -->
                        <li class="dropdown">
                            <a href="javascript:void(0)" class="dropdown-toggle" data-toggle="dropdown">
                                <img src="~/img/placeholders/avatars/avatar2.jpg" alt="avatar">
                                <i class="fa fa-angle-down"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-custom dropdown-menu-right">
                                <li class="dropdown-header text-center">Account</li>
                                <li class="divider"></li>
                                <li>
                                    <a href="javascript:void(0)">
                                        <i class="fa fa-lock fa-fw pull-right"></i> Lock Account
                                    </a>
                                    <a href="javascript:void(0)" onclick="confirmLogout()">
                                        <i class="fa fa-ban fa-fw pull-right"></i> Logout
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <!-- END User Dropdown -->
                    </ul>
                    <!-- END Right Header Navigation -->
                </header>
                <!-- END Header -->

                <!-- Page content -->
                <div id="page-content">
                    @RenderBody()
                </div>
                <!-- END Page Content -->

                <!-- Footer -->
                <footer class="clearfix">
                    <div class="pull-right">
                        Crafted with <i class="fa fa-heart text-danger"></i> by <a href="#" target="_blank">Template PRO UI</a>
                    </div>
                    <div class="pull-left">
                        <span id="year-copy"></span> &copy; <a href="#" target="_blank">PT. Velasto Indonesia</a>
                    </div>
                </footer>
                <!-- END Footer -->
            </div>
            <!-- END Main Container -->
        </div>
        <!-- END Page Container -->
    </div>
    <!-- END Page Wrapper -->

    <!-- Scroll to top link -->
    <a href="#" id="to-top"><i class="fa fa-angle-double-up"></i></a>

    <!-- User Settings Modal -->
    <div id="modal-user-settings" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header text-center">
                    <h2 class="modal-title"><i class="fa fa-pencil"></i> Settings</h2>
                </div>
                <div class="modal-body">
                    <form action="javascript:void(0)" method="post" class="form-horizontal form-bordered">
                        <fieldset>
                            <legend>Vital Info</legend>
                            <div class="form-group">
                                <label class="col-md-4 control-label">Username</label>
                                <div class="col-md-8">
                                    <p class="form-control-static">Admin</p>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-4 control-label" for="user-settings-email">Email</label>
                                <div class="col-md-8">
                                    <input type="email" id="user-settings-email" name="user-settings-email"
                                        class="form-control" value="admin@example.com">
                                </div>
                            </div>
                        </fieldset>
                        <div class="form-group form-actions">
                            <div class="col-xs-12 text-right">
                                <button type="button" class="btn btn-sm btn-default" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-sm btn-primary">Save Changes</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- END User Settings Modal -->

    <!-- Scripts -->
    <script src="~/js/vendor/jquery.min.js"></script>
    <script src="~/js/vendor/bootstrap.min.js"></script>
    <script src="~/js/plugins.js"></script>
    <script src="~/js/app.js"></script>

    <!-- Custom Scripts Section -->


    @await RenderSectionAsync("Scripts", required: false)

    <!-- Page specific initialization -->
    <script>
        $(function () {
            // Initialize ProUI App
            if (typeof App !== 'undefined') {
                App.init();
            }

            // Initialize tooltips for theme colors
            $('[data-toggle="tooltip"]').tooltip();

            // Set current year in footer
            document.getElementById('year-copy').textContent = new Date().getFullYear();
        });

        // Versi dengan SweetAlert (lebih menarik)
        function confirmLogout() {
            if (typeof Swal !== 'undefined') {
                Swal.fire({
                    title: 'Konfirmasi Logout',
                    text: 'Apakah Anda yakin akan logout?',
                    icon: 'question',
                    showCancelButton: true,
                    confirmButtonColor: '#d33',
                    cancelButtonColor: '#3085d6',
                    confirmButtonText: 'Ya, Logout!',
                    cancelButtonText: 'Batal'
                }).then((result) => {
                    if (result.isConfirmed) {
                        window.location.href = '@Url.Action("Logout", "Account")';
                    }
                });
            } else {
                // Fallback ke confirm biasa jika SweetAlert tidak tersedia
                if (confirm('Apakah Anda yakin akan logout?')) {
                    window.location.href = '@Url.Action("Logout", "Account")';
                }
            }
        }
    </script>
</body>

</html>